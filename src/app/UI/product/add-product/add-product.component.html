<div class="flex-container">
  <form [formGroup]="addProductForm" (ngSubmit)="onSubmit()" class="form center-block">
    <h4>Add Product</h4>
    <mat-form-field>
      <input matInput placeholder="Title" name="title" formControlName="title" [(ngModel)]="product.title"
        [errorStateMatcher]="matcher">
      <mat-error *ngIf="addProductForm.get('title').hasError('minlength')">
        Min length {{constants.minValidationLength}}
      </mat-error>
      <mat-error *ngIf="addProductForm.get('title').hasError('maxlength')">
        Max length {{constants.maxValidationLength}}
      </mat-error>
      <mat-error *ngIf="addProductForm.get('title').hasError('required')">
        Field is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Category" name="category" formControlName="category" [(ngModel)]="product.category.title"
        [errorStateMatcher]="matcher">
      <mat-error *ngIf="addProductForm.get('category').hasError('minlength')">
        Min length {{constants.minValidationLength}}
      </mat-error>
      <mat-error *ngIf="addProductForm.get('category').hasError('maxlength')">
        Max length {{constants.maxValidationLength}}
      </mat-error>
      <mat-error *ngIf="addProductForm.get('category').hasError('required')">
        Field is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput placeholder="Description" name="description" formControlName="description" [(ngModel)]="product.description"
        [errorStateMatcher]="matcher"></textarea>
      <mat-error *ngIf="addProductForm.get('description').hasError('required')">
        Field is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput placeholder="Short description" name="shortDescription" formControlName="shortDescription"
        [(ngModel)]="product.shortDescription" [errorStateMatcher]="matcher"></textarea>
      <mat-error *ngIf="addProductForm.get('shortDescription').hasError('maxlength')">
        Max length {{constants.maxShortDescriptionLength}}
      </mat-error>
      <mat-error *ngIf="addProductForm.get('shortDescription').hasError('required')">
        Field is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Price" name="price" formControlName="price" [(ngModel)]="product.price"
        [errorStateMatcher]="matcher" type="number">
      <mat-error *ngIf="addProductForm.get('price').hasError('min')">
        Min is 0
      </mat-error>
      <mat-error *ngIf="addProductForm.get('price').hasError('required')">
        Field is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Main image url" name="imageUrl" formControlName="imageUrl" [(ngModel)]="product.imageUrl"
        [errorStateMatcher]="matcher">
      <mat-error *ngIf="addProductForm.get('imageUrl').hasError('required')">
        Field is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <div>
      <div class="input-group">
        <mat-form-field>
          <input matInput placeholder="Small image url" name="smallImageUrl" [ngModelOptions]="{standalone: true}"
            [(ngModel)]="smallImageUrl">
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Big image url" name="bigImageUrl" [ngModelOptions]="{standalone: true}"
            [(ngModel)]="bigImageUrl">
        </mat-form-field>

        <div>
          <div>
            <button type="button" mat-icon-button (click)="addImage()">
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div *ngFor="let image of product.imagesLinks">
      <div class="input-group">
        <img mat-card-image src="{{image.image}}" matTooltip="Big image" alt="Photo of {{product.title}}">
        <img mat-card-image src="{{image.thumbImage}}" matTooltip="Small image" alt="Photo of {{product.title}}">
        <div>
          <div>
            <button mat-icon-button type="button" (click)="removeImage(image)">
              <mat-icon>clear</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="input-group">
        <mat-form-field>
          <input matInput placeholder="Specification name" name="specificationName" [ngModelOptions]="{standalone: true}"
            [(ngModel)]="specificationName">
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Specification value" name="specificationValue" [ngModelOptions]="{standalone: true}"
            [(ngModel)]="specificationValue">
        </mat-form-field>

        <div>
          <div>
            <button type="button" mat-icon-button (click)="addSpecification()">
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div *ngFor="let specification of product.specifications">
      <div class="input-group">
        <p>{{ specification.name }} {{ specification.value}}</p>
        <div>
          <div>
            <button mat-icon-button type="button" (click)="removeSpecification(specification)">
              <mat-icon>clear</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <button mat-raised-button type="submit">Add</button>

  </form>
</div>
